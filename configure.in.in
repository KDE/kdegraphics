#MIN_CONFIG
DO_NOT_COMPILE="$DO_NOT_COMPILE"
dnl Checks for header files.
AC_HEADER_DIRENT
AC_HEADER_STDC
AC_CHECK_HEADERS(fcntl.h sys/time.h unistd.h stdlib.h paths.h)
AC_CHECK_SETENV
AC_CHECK_UNSETENV
AC_CHECK_USLEEP
AC_CHECK_MKSTEMPS
dnl Checks for typedefs, structures, and compiler characteristics.
AC_HEADER_TIME

CXXFLAGS="$CXXFLAGS $KDE_DEFAULT_CXXFLAGS"

KDE_INIT_DOXYGEN([The KDE API Reference], [Version $VERSION])

AC_ARG_WITH([poppler],
  [AS_HELP_STRING([--with-poppler],
    [Enable PDF support through poppler  @<:@default=check@:>@])],
  [], with_poppler=check)

if test "x$with_poppler" != xno; then
  PKG_CHECK_MODULES(POPPLER_QT4_4, poppler-qt4 >= 0.4, have_poppler_qt4_040=yes, have_poppler_qt4_040=no)
  PKG_CHECK_MODULES(POPPLER_QT4, poppler-qt4 >= 0.5, have_poppler_qt4_050=yes, have_poppler_qt4_050=no)
  PKG_CHECK_MODULES(POPPLER, poppler >= 0.5.1, have_poppler_051=yes, have_poppler_051=no)
fi

AM_CONDITIONAL(include_PDF_kfile_plugin, test "x$have_poppler_qt4_040" = xyes)
AM_CONDITIONAL(include_PDF_kviewshell, test "x$have_poppler_qt4_050" = xyes)

if test "x$have_poppler_051" != xyes; then
  DO_NOT_COMPILE="$DO_NOT_COMPILE kpdf"
fi
